# スクール検索サイト テーブル一覧
### 管理部門テーブル
- テーブル名(物理名)：admin_department
- テーブル名(論理名)：管理部門
- 概要：管理者が所属する部門に関するデータを格納する。

| データ項目名(物理名)          | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー | ユニーク制約 | 内容                      |
| ----------------------------- | -------------------- | -------- | -------- | ------ | -------- | ------------ | ------------------------- |
| admin_department_id           | 管理部門ID           | 整数型   | 不可     | ○      |          | ○            | 自動採番                  |
| admin_department_name         | 管理部門名           | 文字列型 | 不可     |        |          |              |                           |
| admin_department_authority    | 管理部門権限         | 文字列型 | 不可     |        |          |              | 0〜9のいづれかの値        |
| admin_department_status       | 管理部門ステータス   | 文字列型 | 不可     |        |          |              | 0：無効、1：有効   |
| admin_department_created_at   | 管理部門作成日時     | 日時型   | 不可     |        |          |              | 自動付与                  |
| admin_department_updated_at   | 管理部門更新日時     | 日時型   | 不可     |        |          |              | 自動付与                  |
| admin_department_delete_flag  | 管理部門削除フラグ   | 文字列型 | 不可     |        |          |              | 0：未削除、1：削除 |
| admin_department_deleted_date | 管理部門削除日時     | 日時型   | 可       |        |          |              | 自動付与                  |

### 管理者テーブル
- テーブル名(物理名)：admins
- テーブル名(論理名)：管理者
- 概要：サイト管理者に関するデータを格納する。

| データ項目名(物理名)  | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー            | ユニーク制約 | 内容                      |
| --------------------- | -------------------- | -------- | -------- | ------ | ------------------- | ------------ | ------------------------- |
| admin_id              | 管理者ID             | 整数型   | 不可     | ○      |                     | ○            | 自動採番                  |
| admin_department_id   | 管理部門ID           | 整数型   | 不可     |        | 管理部門.管理部門ID |              |                           |
| admin_last_name       | 管理者姓             | 文字列型 | 不可     |        |                     |              |                           |
| admin_first_name      | 管理者名             | 文字列型 | 不可     |        |                     |              |                           |
| admin_last_name_kana  | 管理者姓(フリガナ)   | 文字列型 | 不可     |        |                     |              |                           |
| admin_first_name_kana | 管理者名(フリガナ)   | 文字列型 | 不可     |        |                     |              |                           |
| admin_mail_address    | 管理者メールアドレス | 文字列型 | 不可     |        |                     | ○            |                           |
| admin_password        | 管理者パスワード     | 文字列型 | 不可     |        |                     |              |                           |
| admin_authority       | 管理者権限           | 文字列型 | 不可     |        |                     |              | 0〜9のいづれかの値        |
| admin_status          | 管理者ステータス     | 文字列型 | 不可     |        |                     |              | 0：無効、1：有効    |
| admin_created_at      | 管理者作成日時       | 日時型   | 不可     |        |                     |              | 自動付与                  |
| admin_updated_at      | 管理者更新日時       | 日時型   | 不可     |        |                     |              | 自動付与                  |
| admin_delete_flag     | 管理者削除フラグ     | 文字列型 | 不可     |        |                     |              | 0：未削除、1：削除 |
| admin_deleted_date    | 管理者削除日時       | 日時型   | 可       |        |                     |              | 自動付与                  |

### 性別テーブル
- テーブル名(物理名)：sexes
- テーブル名(論理名)：性別
- 概要：性別に関するデータを格納する。
- 

| データ項目名(物理名) | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー | ユニーク制約 | 内容 |
| -------------------- | -------------------- | -------- | -------- | ------ | -------- | ------------ | ---- |
| sex_id               | 性別ID               | 整数型   | 不可     | ○      |          | ○            |      |
| sex_name             | 性別名               | 文字列型 | 不可     |        |          | ○            |      |

### 都道府県テーブル
- テーブル名(物理名)：prefectures
- テーブル名(論理名)：都道府県
- 概要：都道府県に関するデータを格納する。

| データ項目名(物理名) | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー | ユニーク制約 | 内容     |
| -------------------- | -------------------- | -------- | -------- | ------ | -------- | ------------ | -------- |
| prefecture_id        | 都道府県ID           | 整数型   | 不可     | ○      |          | ○            | 自動採番 |
| prefecture_name      | 都道府県名           | 文字列型 | 不可     |        |          | ○            |          |

### アカウントテーブル
- テーブル名(物理名)：accounts
- テーブル名(論理名)：アカウント
- 概要：アカウントに関するデータを格納する。

| データ項目名(物理名)    | データ項目名(論理名)         | データ型 | NULL可否 | 主キー | 外部キー                        | ユニーク制約 | 内容                      |
| ----------------------- | ---------------------------- | -------- | -------- | ------ | ------------------------------- | ------------ | ------------------------- |
| account_id              | アカウントID                 | 整数型   | 不可     | ○      |                                 | ○            | 自動採番                  |
| last_name               | 姓                           | 文字列型 | 不可     |        |                                 |              |                           |
| first_name              | 名                           | 文字列型 | 不可     |        |                                 |              |                           |
| last_name_kana          | 姓(フリガナ)                 | 文字列型 | 不可     |        |                                 |              |                           |
| first_name_kana         | 名(フリガナ）                | 文字列型 | 不可     |        |                                 |              |                           |
| sex_id                  | 性別                         | 数値型   | 可       |        | 性別.性別ID                     |              |                           |
| birth_date              | 生年月日                     | 日時型   | 可       |        |                                 |              |                           |
| prefecture_id           | 都道府県                     | 数値型   | 不可     |        | 都道府県.都道府県ID             |              |                           |
| mail_address            | メールアドレス               | 文字列型 | 不可     |        |                                 | ○            |                           |
| profile_image_file_name | プロフィール画像ファイル名   | 文字列型 | 可       |        |                                 |              |                           |
| self_introduction       | 自己紹介                     | 文字列型 | 可       |        |                                 |              |                           |
| password                | パスワード                   | 文字列型 | 不可     |        |                                 |              |                           |
| account_status          | アカウントステータス         | 文字列型 | 不可     |        |                                 |              | 0：無効、1：有効   |
| activate_token          | 有効化トークン               | 文字列型 | 可       |        |                                 |              |                           |
| activate_effective_date | 有効化有効期限               | 日時型   | 可       |        |                                 |              |                           |
| reissue_token           | 再発行トークン               | 文字列型 | 可       |        |                                 |              |                           |
| reissue_effective_date  | 再発行有効期限               | 日時型   | 可       |        |                                 |              |                           |
| account_created_at      | アカウント作成日時           | 日時型   | 不可     |        |                                 |              | 自動付与                  |
| account_updated_at      | アカウント更新日時           | 日時型   | 不可     |        |                                 |              | 自動付与                  |
| account_delete_flag     | アカウント削除フラグ         | 文字列型 | 不可     |        |                                 |              | 0：未削除、1：削除 |
| account_deleted_at      | アカウント削除日時           | 日時型   | 可       |        |                                 |              | 自動付与                  |

### カテゴリーテーブル
- テーブル名(物理名)：categoies
- テーブル名(論理名)：カテゴリー
- 概要：スクールに設定するカテゴリーに関するデータを格納する。

| データ項目名(物理名)   | データ項目名(論理名)         | データ型 | NULL可否 | 主キー | 外部キー                | ユニーク制約 | 内容                      |
| ---------------------- | ---------------------------- | -------- | -------- | ------ | ----------------------- | ------------ | ------------------------- |
| category_id            | カテゴリーID                 | 整数型   | 不可     | ○      |                         | ○            | 自動採番                  |
| category_name          | カテゴリー名                 | 文字列型 | 不可     |        |                         | ○            |                           |
| senior_category_id     | 上位カテゴリーID             | 整数型   | 可       |        | カテゴリー.カテゴリーID |              |                           |
| category_status        | カテゴリーステータス         | 文字列型 | 不可     |        |                         |              | 0：無効、1：有効   |
| category_created_at    | カテゴリー作成日時           | 日時型   | 不可     |        |                         |              | 自動付与                  |
| category_updated_at    | カテゴリー更新日時           | 日時型   | 不可     |        |                         |              | 自動付与                  |
| category_delete_flag   | カテゴリー削除フラグ         | 文字列型 | 不可     |        |                         |              | 0：未削除、1：削除 |
| category_deleted_at    | カテゴリー削除フラグ更新日時 | 日時型   | 可       |        |                         |              | 自動付与                  |

### スクールテーブル
- テーブル名(物理名)：schools
- テーブル名(論理名)：スクール
- 概要：スクールに関するデータを格納する。

| データ項目名(物理名)     | データ項目名(論理名)    | データ型 | NULL可否 | 主キー | 外部キー                | ユニーク制約 | 内容                                                   |
| ------------------------ | ----------------------- | -------- | -------- | ------ | ----------------------- | ------------ | ------------------------------------------------------ |
| school_id                | スクールID              | 整数型   | 不可     | ○      |                         | ○            | 自動採番                                               |
| registrant_account_id    | 登録者アカウントID      | 整数型   | 不可※    |        | アカウント.アカウントID |              | ※1：アカウントIDまたは管理者IDのいづれか一方でNULL不可 |
| registrant_admin_id      | 登録者管理者ID          | 整数型   | 不可※    |        | 管理者.管理者ID         |              | ※1：アカウントIDまたは管理者IDのいづれか一方でNULL不可 |
| school_name              | スクール名              | 文字列型 | 不可     |        |                         |              |                                                        |
| school_category_id       | スクールカテゴリーID    | 整数型   | 不可     |        | カテゴリー.カテゴリーID |              |                                                        |
| school_summary           | スクール概要            | 文字列型 | 不可     |        |                         |              |                                                        |
| school_description       | スクール詳細            | 文字列型 | 不可     |        |                         |              |                                                        |
| school_zip_code1         | スクール郵便番号1       | 文字列型 | 不可     |        |                         |              |                                                        |
| school_zip_code2         | スクール郵便番号2       | 文字列型 | 不可     |        |                         |              |                                                        |
| school_prefecture_id     | スクール都道府県ID      | 整数型   | 不可     |        | 都道府県.都道府県ID     |              |                                                        |
| school_city              | スクール市区町村        | 文字列型 | 不可     |        |                         |              |                                                        |
| school_address1          | スクール住所1           | 文字列型 | 不可     |        |                         |              |                                                        |
| school_address2          | スクール住所2           | 文字列型 | 可       |        |                         |              |                                                        |
| school_fee               | スクール費用            | 真数値   | 不可     |        |                         |              |                                                        |
| supplementary_fee        | 費用補足                | 文字列型 | 可       |        |                         |              |                                                        |
| school_url               | スクールサイトURL       | 文字列型 | 可       |        |                         |              |                                                        |
| school_release_propriety | スクール公開可否        | 文字列型 | 不可     |        |                         |              | 0：不可、1：可                                  |
| school_entry_propriety   | スクール申込可否        | 文字列型 | 不可     |        |                         |              | 0：不可、1：可                                  |
| summary_image_file_name  | 一覧画面画像ファイル名  | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image1_file_name  | 詳細画面画像1ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image2_file_name  | 詳細画面画像2ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image3_file_name  | 詳細画面画像3ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image4_file_name  | 詳細画面画像4ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image5_file_name  | 詳細画面画像5ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image6_file_name  | 詳細画面画像6ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image7_file_name  | 詳細画面画像7ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| detail_image8_file_name  | 詳細画面画像8ファイル名 | 文字列型 | 可       |        |                         |              |                                                        |
| school_registered_at     | スクール登録日時        | 日時型   | 不可     |        |                         |              | 自動付与                                               |
| school_updated_at        | スクール更新日時        | 日時型   | 不可     |        |                         |              | 自動付与                                               |
| school_delete_flag       | スクール削除フラグ      | 文字列型 | 不可     |        |                         |              | 0：未削除、1：削除                              |
| school_deleted_at        | スクール削除日時        | 日時型   | 可       |        |                         |              | 自動付与                                               |

### 申込ステータステーブル
- テーブル名(物理名)：entry_statuses
- テーブル名(論理名)：申込ステータス
- 概要：スクールへの申込のステータスに関するデータを格納する。

| データ項目名(物理名) | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー | ユニーク制約 | 内容 |
| -------------------- | -------------------- | -------- | -------- | ------ | -------- | ------------ | ---- |
| entry_status_id    | 申込ステータスID | 整数型   | 不可     | ○      |          | ○            |      |
| entry_status_name  | 申込ステータス名 | 文字列型 | 不可     |        |          | ○            |      |

### 申込テーブル
- テーブル名(物理名)：entries
- テーブル名(論理名)：申込
- 概要：スクールへの申込に関するデータを格納する。

| データ項目名(物理名) | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー                        | ユニーク制約 | 内容                      |
| -------------------- | -------------------- | -------- | -------- | ------ | ------------------------------- | ------------ | ------------------------- |
| entry_id             | 申込ID               | 整数型   | 不可     | ○      |                                 | ○            | 自動採番                  |
| entry_school_id      | 申込先スクールID     | 整数型   | 不可     |        | スクール.スクールID             |              |                           |
| applicant_account_id | 申込者アカウントID   | 整数型   | 不可     |        | アカウント.アカウントID         |              |                           |
| entry_question       | 質問                 | 文字列型 | 可       |        |                                 |              |                           |
| entry_status_id      | 申込ステータスID     | 整数型   | 不可     |        | 申込ステータス.申込ステータスID |              |                           |
| entried_at           | 申込日時             | 日時型   | 不可     |        |                                 |              | 自動付与                  |
| entry_updated_at     | 申込更新日時         | 日時型   | 不可     |        |                                 |              | 自動付与                  |
| entry_delete_flag    | 申込削除フラグ       | 文字列型 | 不可     |        |                                 |              | 0：未削除、1：削除 |
| entry_deleted_at     | 申込削除日時         | 日時型   | 可       |        |                                 |              | 自動付与                  |

### お気に入りテーブル
- テーブル(物理名)：favorites
- テーブル(論理名)：お気に入り
- 概要：お気に入りスクールのデータを格納する。

| データ項目名(物理名) | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー                | ユニーク制約 | 内容                    |
| -------------------- | -------------------- | -------- | -------- | ------ | ----------------------- | ------------ | ----------------------- |
| favorite_id          | お気に入りID         | 整数型   | 不可     | ○      |                         | ○            | アカウントID+スクールID |
| account_id           | アカウントID         | 整数型   | 不可     |        | アカウント.アカウントID |              |                         |
| school_id            | スクールID           | 整数型   | 不可     |        | スクール.スクールID     |              |                         |
| favorite_added_at    | お気に入り追加日時   | 日時型   | 不可     |        |                         |              | 自動付与                |

### メッセージテーブル
- テーブル(物理名)：messages
- テーブル(論理名)：メッセージ
- 概要：スクールに申し込んだアカウントと受け付けたアカウントが相互にやり取りするメッセージに関するデータを格納する。

| データ項目名(物理名)      | データ項目名(論理名)               | データ型 | NULL可否 | 主キー | 外部キー                | ユニーク制約 | 内容                        |
| ------------------------- | ---------------------------------- | -------- | -------- | ------ | ----------------------- | ------------ | --------------------------- |
| message_id                | メッセージID                       | 整数型   | 不可     | ○      |                         | ○            | 自動採番                    |
| reply_message_id          | 返信メッセージID                   | 整数型   | 可       |        | メッセージ.メッセージID |              |                             |
| entry_id                  | 申込ID                             | 整数型   | 不可     |        | 申込.申込ID             |              |                             |
| sender_account_id         | 差出アカウントID                   | 整数型   | 不可     |        | アカウント.アカウントID |              |                             |
| recipient_account_id      | 受取アカウントID                   | 整数型   | 不可     |        | アカウント.アカウントID |              |                             |
| message_subject           | 件名                               | 文字列型 | 不可     |        |                         |              |                             |
| message_body              | 本文                               | 文字列型 | 不可     |        |                         |              |                             |
| sended_at                 | 送信日時                           | 日時型   | 不可     |        |                         |              | 自動付与                    |
| opened_flag               | 開封済フラグ                       | 文字列型 | 不可     |        |                         |              | 0：未開封、false：開封済 |
| opened_at                 | 開封日時                           | 日時型   | 可       |        |                         |              | 自動付与                    |
| sender_delete_flag        | 差出アカウント側削除フラグ         | 文字列型 | 不可     |        |                         |              | 0：未削除、1：削除   |
| sender_flag_updated_at    | 差出アカウント側削除フラグ更新日時 | 日時型   | 可       |        |                         |              | 自動付与                    |
| recipient_flag_flag       | 受取アカウント側削除フラグ         | 文字列型 | 不可     |        |                         |              | 0：未削除、1：削除   |
| recipient_flag_updated_at | 受取アカウント側削除フラグ更新日時 | 日時型   | 可       |        |                         |              | 自動付与                    |

### お問合せステータステーブル
- テーブル名(物理名)：contact_statuses
- テーブル名(論理名)：お問わせステータス
- 概要：お問合せスタータすに関するデータを格納する。

| データ項目名(物理名) | データ項目名(論理名) | データ型 | NULL可否 | 主キー | 外部キー | ユニーク制約 | 内容 |
| -------------------- | -------------------- | -------- | -------- | ------ | -------- | ------------ | ---- |
| contact_status_id    | お問合せステータスID | 整数型   | 不可     | ○      |          | ○            |      |
| contact_status_name  | お問合せステータス名 | 文字列型 | 不可     |        |          | ○            |      |

### お問合せテーブル
- テーブル名(物理名)：contacts
- テーブル名(論理名)：お問合せ
- 概要：お問合せに関するデータを格納する。

| データ項目名(物理名)      | データ項目名(論理名)     | データ型 | NULL可否 | 主キー | 外部キー                                | ユニーク制約 | 内容                      |
| ------------------------- | ------------------------ | -------- | -------- | ------ | --------------------------------------- | ------------ | ------------------------- |
| contact_id                | お問合せID               | 整数型   | 不可     | ○      |                                         | ○            | 自動採番                  |
| contact_account_id        | お問合せ者アカウントID   | 整数型   | 可       |        | アカウント.アカウントID                 |              |                           |
| contact_last_name         | お問合せ者姓             | 文字列型 | 不可     |        |                                         |              |                           |
| contact_first_name        | お問合せ者名             | 文字列型 | 不可     |        |                                         |              |                           |
| contact_last_name_kana    | お問合せ者姓(フリガナ)   | 文字列型 | 不可     |        |                                         |              |                           |
| contact_first_name_kana   | お問合せ者名(フリガナ)   | 文字列型 | 不可     |        |                                         |              |                           |
| contact_mail_address      | お問合せ者メールアドレス | 文字列型 | 不可     |        |                                         |              |                           |
| contact_content           | お問合せ内容             | 文字列型 | 不可     |        |                                         |              |                           |
| contact_contact_status_id | お問合せステータスID     | 整数型   | 不可     |        | お問合せステータス.お問合せステータスID |              |                           |
| contacted_at              | お問合せ日時             | 日時型   | 不可     |        |                                         |              | 自動付与                  |
| contact_updated_at        | お問合せ更新日時         | 日時型   | 不可     |        |                                         |              | 自動付与                  |
| contact_delete_flag       | お問合せ削除フラグ       | 文字列型 | 不可     |        |                                         |              | 0：未削除、1：削除 |
| contact_deleted_at        | お問合せ削除日時         | 日時型   | 可       |        |                                         |              | 自動付与                  |

### メールテンプレートテーブル
- テーブル名(物理名)：mail_templetes
- テーブル名(論理名)：メールテンプレート
- 概要：システムが送信するメールのテンプレートに関するデータを格納する。

| データ項目名(物理名)        | データ項目名(論理名)           | データ型 | NULL可否 | 主キー | 外部キー        | ユニーク制約 | 内容                      |
| --------------------------- | ------------------------------ | -------- | -------- | ------ | --------------- | ------------ | ------------------------- |
| mail_templete_id            | メールテンプレートID           | 整数型   | 不可     | ○      |                 | ○            | 自動採番                  |
| mail_templete_name          | メールテンプレート名           | 文字列型 | 可       |        |                 |              |                           |
| mail_templete_subject       | 件名                           | 文字列型 | 不可     |        |                 |              |                           |
| mail_templete_header        | ヘッダー文                     | 文字列型 | 不可     |        |                 |              |                           |
| mail_templete_footer        | フッター文                     | 文字列型 | 不可     |        |                 |              |                           |
| mail_templete_created_at    | メールテンプレート作成日時     | 日時型   | 不可     |        |                 |              | 自動付与                  |
| mail_templete_updated_at    | メールテンプレート更新日時     | 日時型   | 不可     |        |                 |              | 自動付与                  |
| mail_templete_delete_flag   | メールテンプレート削除フラグ   | 文字列型 | 不可     |        |                 |              | 0：未削除、1：削除 |
| mail_templete_deleted_at    | メールテンプレート削除日時     | 日時型   | 可       |        |                 |              | 自動付与                  |
